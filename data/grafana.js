// grafana.js

window.Grafana = {
  "Grafana - Обзор": [
    "Описание: Открытая платформа для визуализации метрик и аналитики.",
    "Ключевые возможности:",
    "- Работа с разными источниками данных (Prometheus, InfluxDB, Elasticsearch и др.)",
    "- Интерактивные панели мониторинга",
    "- Система оповещений",
    "- Расширяемость через плагины",
    "- Командная работа",
    "Применение: Мониторинг систем, анализ данных, отслеживание метрик приложений."
  ],
  "Grafana - Основные возможности": [
    "Подключение источников данных: Интеграция с разными системами мониторинга и БД",
    "Дашборды: Создание информативных панелей мониторинга",
    "Визуализация: Различные типы графиков и диаграмм",
    "Оповещения: Настройка уведомлений по условиям",
    "Плагины: Расширение функционала",
    "Пользовательские панели: Создание своих компонентов",
    "Доступ: Интеграция с системами авторизации",
    "Экспорт/Импорт: Перенос настроек между системами",
    "Переменные: Гибкая настройка отображения данных",
    "Аннотации: Добавление пометок на графики"
  ],
  "Grafana - Установка и настройка": [
    "Требования:",
    "- ОС: Linux, Windows, macOS",
    "- Node.js для разработки плагинов",
    "- БД: SQLite, MySQL, PostgreSQL",

    "Установка:",
    "1. Скачать с grafana.com/get",
    "2. Установить для вашей ОС:",
    "- Linux: через пакетный менеджер apt/yum",
    "- Windows: через MSI установщик",
    "- macOS: через Homebrew",
    "3. Запустить:",
    "- Linux: systemctl start grafana-server",
    "- Windows: через службы",
    "- macOS: brew services start grafana",
    "4. Открыть http://localhost:3000",
    "5. Войти (admin/admin)",

    "Подключение источников данных:",
    "- Configuration > Data Sources",
    "- Выбрать источник",
    "- Настроить подключение"
  ],
  "Grafana - Источники данных": [
    "Описание: Системы, предоставляющие данные для визуализации",
    "Основные источники:",
    "- Prometheus: система мониторинга",
    "- InfluxDB: временные ряды",
    "- Elasticsearch: поиск и аналитика",
    "- MySQL/PostgreSQL: реляционные БД",
    "- Graphite: метрики",
    "- Loki: логи",
    "- CloudWatch: мониторинг AWS",
    "Добавление источника:",
    "1. Configuration > Data Sources",
    "2. Add data source",
    "3. Выбрать тип",
    "4. Настроить параметры",
    "5. Save & Test"
  ],
  "Grafana - Дашборды": [
    "Описание: Панели для визуализации данных",
    "Создание:",
    "1. Create > Dashboard",
    "2. Add panel",
    "3. Выбрать источник",
    "4. Настроить визуализацию",
    "5. Сохранить",
    "Управление:",
    "- Организация по папкам",
    "- Использование переменных",
    "- Импорт готовых дашбордов"
  ],
  "Grafana - Панели и визуализации": [
    "Описание: Компоненты отображения данных",
    "Типы:",
    "- Graph: линейные и столбчатые графики",
    "- Gauge: индикаторы",
    "- Table: таблицы",
    "- Heatmap: тепловые карты",
    "- Singlestat: одиночные значения",
    "- Pie Chart: круговые диаграммы",
    "- Bar Gauge: столбчатые индикаторы",
    "- Text: текст",
    "- Logs: логи",
    "- Alerts: оповещения",
    "Настройка:",
    "- Выбор источника",
    "- Визуальные параметры",
    "- Аннотации",
    "- Интерактивность"
  ],
  "Grafana - Оповещения": [
    "Описание: Система уведомлений",
    "Настройка:",
    "1. Выбрать панель",
    "2. Alert",
    "3. Задать условия",
    "4. Указать частоту проверки",
    "5. Выбрать канал",
    "6. Сохранить",
    "Управление:",
    "- Alerting > Rules",
    "- Шаблоны и переменные",
    "- Группировка уведомлений"
  ],
  "Grafana - Плагины": [
    "Описание: Дополнительные компоненты",
    "Типы:",
    "- Визуализации",
    "- Источники данных",
    "- Приложения",
    "- Панели",
    "- Облачные сервисы",
    "Установка:",
    "- Через веб-интерфейс",
    "- Через CLI",
    "Популярные плагины:",
    "- Worldmap",
    "- Pie Chart",
    "- Polystat",
    "- Clock",
    "- JSON API"
  ],
  "Grafana - Лучшие практики": [
    "Планирование: Учет потребностей пользователей",
    "Переменные: Для гибкости дашбордов",
    "Оптимизация: Эффективные запросы",
    "Доступ: Настройка ролей",
    "Мониторинг: Контроль состояния",
    "Автоматизация: CI/CD",
    "Бэкапы: Регулярное копирование",
    "Документация: Описание настроек",
    "Шаблоны: Стандартизация",
    "Версионирование: Контроль изменений"
  ],
  "Grafana - Вопросы и ответы": [
    "Вопрос: Что такое Grafana?",
    "Ответ: Платформа для визуализации данных и мониторинга систем в реальном времени.",

    "Вопрос: Основные функции?",
    "Ответ: Визуализация метрик, создание дашбордов, оповещения, интеграция с источниками данных.",

    "Вопрос: Интеграция с системами мониторинга?",
    "Ответ: Через источники данных - Prometheus, InfluxDB, Elasticsearch и другие.",

    "Вопрос: Типы визуализаций?",
    "Ответ: Графики, таблицы, диаграммы, индикаторы, тепловые карты и другие.",

    "Вопрос: Настройка оповещений?",
    "Ответ: Через панель Alert с условиями и каналами уведомлений.",

    "Вопрос: Установка на Linux?",
    "Ответ: Через пакетный менеджер или вручную из архива.",

    "Вопрос: Поддерживаемые источники данных?",
    "Ответ: Prometheus, InfluxDB, Elasticsearch, SQL базы и другие.",

    "Вопрос: Как подключить Prometheus?",
    "Ответ: Через Data Sources указать URL сервера.",

    "Вопрос: Несколько источников в дашборде?",
    "Ответ: Да, каждая панель может использовать свой источник.",

    "Вопрос: Создание дашборда?",
    "Ответ: Create > Dashboard, добавление панелей и настройка визуализации.",

    "Вопрос: Импорт дашборда?",
    "Ответ: Через Import с указанием ID или JSON файла.",

    "Вопрос: Отображение логов?",
    "Ответ: Через панель Logs с фильтрацией и поиском.",

    "Вопрос: Добавление аннотаций?",
    "Ответ: В настройках панели раздел Annotations."
  ],
  "Grafana - Prometheus": [
    "Описание: Система мониторинга для сбора и анализа метрик",
    "Особенности:",
    "- HTTP сбор метрик",
    "- Собственное хранилище",
    "- PromQL запросы",
    "- Alertmanager",
    "- Автономность",
    "Применение: Мониторинг серверов и приложений",
    "Плюсы:",
    "- Производительность",
    "- Гибкий PromQL",
    "- Интеграция с Grafana",
    "- Масштабируемость",
    "Минусы:",
    "- Хранение данных",
    "- Настройка экспортеров",
    "- Сложность для новичков",
    "Установка:",
    "1. Скачать с prometheus.io",
    "2. Настроить prometheus.yml",
    "3. Запустить сервер",
    "4. Добавить экспортеры",
    "5. Подключить к Grafana"
  ],
  "Grafana - Примеры запросов Prometheus": [
    "1. Текущее значение:
       ```promql
       metric_name
       ```",
    "2. Сумма за период:
       ```promql
       sum(rate(metric[5m]))
       ```",
    "3. Среднее по экземплярам:
       ```promql
       avg(rate(metric[1m]))
       ```",
    "4. Количество ошибок:
       ```promql
       sum(rate(errors[5m]))
       ```",
    "5. Максимум в группе:
       ```promql
       max(rate(metric[5m])) by (instance)
       ```",
    "6. Активные соединения:
       ```promql
       count(up) by (job)
       ```",
    "7. Сравнение метрик:
       ```promql
       rate(requests[5m]) / rate(errors[5m])
       ```",
    "8. Фильтр по сервису:
       ```promql
       metric{job=\"service\"}
       ```",
    "9. Группировка:
       ```promql
       sum(rate(requests[5m])) by (code)
       ```",
    "10. Агрегация:
        ```promql
        rate(latency_sum[5m]) / rate(latency_count[5m])
        ```"
  ],
  "Grafana - Вопросы и ответы по Prometheus": [
    "Вопрос: Что такое PromQL?",
    "Ответ: Язык запросов Prometheus для работы с метриками.",

    "Вопрос: Настройка экспортеров?",
    "Ответ: Установка и добавление в prometheus.yml.",
    "```yaml
    scrape_configs:
      - job_name: 'exporter'
        static_configs:
          - targets: ['host:port']
    ```
    Перезапуск Prometheus."
  ],
  "Grafana - Loki": [
    "Описание: Система для работы с логами",
    "Особенности:",
    "- Сжатие логов",
    "- Совместимость с Prometheus",
    "- Метки для поиска",
    "- Масштабируемость",
    "- Grafana интеграция",
    "Применение: Логирование, анализ ошибок",
    "Плюсы:",
    "- Эффективное хранение",
    "- Простая интеграция",
    "- Быстрый поиск",
    "- Удобное управление",
    "Минусы:",
    "- Ограниченная аналитика",
    "- Настройка меток",
    "- Поддержка источников",
    "Установка:",
    "1. Скачать Loki",
    "2. Настроить конфиг",
    "3. Запустить сервер",
    "4. Настроить Promtail",
    "5. Подключить к Grafana"
  ],
  "Grafana - Примеры запросов Loki": [
    "1. Все логи:
       ```logql
       {job=\"logs\"}
       ```",
    "2. Фильтр по уровню:
       ```logql
       {job=\"logs\", level=\"error\"}
       ```",
    "3. Поиск сообщения:
       ```logql
       {job=\"logs\"} |= \"error\"
       ```",
    "4. Регулярные выражения:
       ```logql
       {job=\"logs\"} |~ \"error|warn\"
       ```",
    "5. Подсчет логов:
       ```logql
       count_over_time({job=\"logs\"}[5m])
       ```",
    "6. Агрегация по времени:
       ```logql
       sum by (level) (count_over_time({job=\"logs\"}[5m]))
       ```",
    "7. Среднее время:
       ```logql
       avg_over_time(rate({job=\"logs\"}[1m]))
       ```",
    "8. Группировка:
       ```logql
       {job=\"logs\"} |= \"timeout\" | sum by (service)
       ```",
    "9. Фильтрация и агрегация:
       ```logql
       {job=\"logs\"} |= \"error\" | count_over_time(1m)
       ```",
    "10. Комбинирование:
        ```logql
        {job=\"logs\", service=\"app\"} |= \"failed\" |~ \"user=.*\"
        ```"
  ],
  "Grafana - Вопросы и ответы по Loki": [
    "Вопрос: Настройка Promtail?",
    "Ответ: Установить, настроить конфиг:
    ```yaml
    server:
      port: 9080
    clients:
      - url: http://loki:3100/loki/api/v1/push
    scrape_configs:
      - job_name: system
        static_configs:
          - targets: [localhost]
            labels:
              job: logs
              __path__: /var/log/*
    ```
    Запустить Promtail.",

    "Вопрос: Преимущества перед Elasticsearch?",
    "Ответ: Эффективное хранение, интеграция с Prometheus, быстрый поиск.",

    "Вопрос: Работа с метками?",
    "Ответ: Метки для категоризации логов. Пример:
    ```logql
    {job=\"app\", env=\"prod\", level=\"error\"}
    ```"
  ],
  "Grafana - Общие вопросы и ответы": [
    "Вопрос: Сравнение с Kibana/Tableau?",
    "Ответ: Grafana для метрик и мониторинга, Kibana для логов, Tableau для бизнес-аналитики.",

    "Вопрос: Автоматизация дашбордов?",
    "Ответ: API, Terraform, CI/CD.",

    "Вопрос: Работа с большими данными?",
    "Ответ: Оптимизация запросов, настройка источников, масштабирование.",

    "Вопрос: Мультикомандная работа?",
    "Ответ: Роли и права доступа, папки дашбордов, Grafana Enterprise.",

    "Вопрос: Улучшение производительности?",
    "Ответ:
    - Оптимизация запросов
    - Кеширование
    - Масштабирование
    - Балансировка
    - Управление нагрузкой"
  ]
};
